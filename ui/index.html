<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mszał Rzymski</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <button id="sidebarCollapse" class="navbar-toggler" type="button">
            <span>≡</span>
        </button>

        <a class="navbar-brand" href="/">Mszał Rzymski</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span>⋮</span>
        </button>

        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Kalendarz<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Formularze</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<div class="wrapper">
    <nav id="sidebar">

        <div id="sidebar-tools">
            <input id="search-input" type="search" placeholder="Szukaj..." class="form-control" />
            <div class="input-group date" id="datetimepicker4" data-target-input="nearest">
                <div class="input-group-append" data-target="#datetimepicker4" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
                <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker4" style="display: none" />
            </div>
        </div>
        <ul class="list-unstyled">


            <!--<li class="sidebar-propers-item active">-->
            <!--<a href="#Submenu1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Adwent</a>-->
            <!--<ul class="collapse list-unstyled" id="Submenu1">-->
            <!--<li>-->
            <!--<a href="#">1 Niedziela Adwentu</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">2 Niedziela Adwentu</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">3 Niedziela Adwentu</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->
            <!--<li class="sidebar-propers-item">-->
            <!--<a href="#Submenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Boże Narodzenie</a>-->
            <!--<ul class="collapse list-unstyled" id="Submenu2">-->
            <!--<li>-->
            <!--<a href="#">Boże Narodzenie – Msza o Północy</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">Boże Narodzenie – Msza o Świcie</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">Boże Narodzenie – Msza w Dzień</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->
            <!--<li class="sidebar-propers-item">-->
            <!--<a href="#Submenu3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Okres po Objawieniu</a>-->
            <!--<ul class="collapse list-unstyled" id="Submenu3">-->
            <!--<li>-->
            <!--<a href="#">1 Niedziela po Objawieniu</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">2 Niedziela po Objawieniu</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#">3 Niedziela po Objawieniu</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->


            <li class="sidebar-calendar-item">
                <a href="#2019-11-02">
                    <div>Dzień Zaduszny</div>
                    <div class="tempora rubric">02.11.2019 | Sobota po 20 Niedzieli po Zesłaniu Ducha Świętego</div>
                </a>
            </li>
            <li class="sidebar-calendar-item active">
                <a href="#2019-11-03">
                    <div>21 Niedziela po Zesłaniu Ducha Świętego</div>
                    <div class="tempora rubric">03.11.2019</div>
                </a>
            </li>
            <li class="sidebar-calendar-item">
                <a href="#2019-11-04">
                    <div>Św. Karola Boromeusza</div>
                    <div class="tempora rubric">04.11.2019 | Poniedziałek po 21 Niedzieli po Zesłaniu Ducha Świętego
                    </div>
                </a>
            </li>
            <li class="sidebar-calendar-item">
                <a href="#2019-11-05">
                    <div>Wtorek po 21 Niedzieli po Zesłaniu Ducha Świętego</div>
                    <div class="tempora rubric">05.11.2019</div>
                </a>
            </li>
            <li class="sidebar-calendar-item">
                <a href="#2019-11-06">
                    <div>Środa po 21 Niedzieli po Zesłaniu Ducha Świętego</div>
                    <div class="tempora rubric">06.11.2019</div>
                </a>
            </li>
            <li class="sidebar-calendar-item">
                <a href="#2019-11-07">
                    <div>Czwartek po 21 Niedzieli po Zesłaniu Ducha Świętego</div>
                    <div class="tempora rubric">07.11.2019</div>
                </a>
            </li>
        </ul>
    </nav>
    <div id="content" role="main" class="container-fluid">
        <main class="col-md-9">
            <h1 class="display-8">21 Niedziela po Zesłaniu Ducha Świętego</h1>
            <p><em class="rubric">02.11.2019</em> | <em class="rubric">2 klasy</em> | <em class="rubric">Szaty zielone</em></p>
            <p>Podobnie jak Izraelici dążyli z Egiptu do Ziemi Obiecanej, tak my dążymy do obiecanej nam
                ojczyzny
                wiecznej
                (alleluja). Wejście do niej poprzedzi sąd. Wielokrotnie Chrystus uczył, że głównym przedmiotem
                sądu
                Bożego
                będzie wykonanie przykazania miłości. Winy zostaną odpuszczone tym, którzy je odpuszczali swoim
                winowajcom
                (ewangelia). Najpoważniejszą przeszkodą w osiągnięciu zbawienia jest szatan, duch nienawiści.
                Św.
                Paweł pokazuje
                nam broń duchową, z pomocą której możemy zwalczać ataki wroga zbawienia (lekcja). Modlimy się
                dzisiaj o pomoc
                Bożą w tej walce (kolekta, antyfona na komunię)</p>
            <div class="row">
                <div class="col-md-6">
                    <h2>Introit</h2>
                    <p><em>Est 13:9; 13:10-11</em></p>
                    <p>Na mocy Twojej, Panie, wszystko się opiera i nikt nie może sprzeciwić się Twej woli. Ty
                        bowiem
                        stworzyłeś
                        wszystko, niebo i ziemię, i cokolwiek w przestworzach niebios istnieje. Ty jesteś Panem
                        wszystkich
                        rzeczy.</p>
                    <p><em>Ps 118:1</em></p>
                    <p>Błogosławieni, których droga jest niepokalana: którzy postępują zgodnie z prawem Pana.</p>
                    <p>Chwała Ojcu.</p>
                    <p>Na mocy Twojej, Panie, wszystko się opiera i nikt nie może sprzeciwić się Twej woli. Ty
                        bowiem
                        stworzyłeś
                        wszystko, niebo i ziemię, i cokolwiek w przestworzach niebios istnieje. Ty jesteś Panem
                        wszystkich
                        rzeczy.</p>
                </div>
                <div class="col-md-6">
                    <h2>Introitus</h2>
                    <p><em>Esth 13:9; 13:10-11</em></p>
                    <p>In voluntáte tua, Dómine, univérsa sunt pósita, et non est, qui possit resístere voluntáti
                        tuæ:
                        tu enim
                        fecísti ómnia, coelum et terram et univérsa, quæ coeli ámbitu continéntur: Dominus
                        universórum
                        tu es</p>
                    <p><em>Ps 118:1</em></p>
                    <p>Beáti immaculáti in via: qui ámbulant in lege Dómini.</p>
                    <p>Glória Patri.</p>
                    <p>In voluntáte tua, Dómine, univérsa sunt pósita, et non est, qui possit resístere voluntáti
                        tuæ:
                        tu enim
                        fecísti ómnia, coelum et terram et univérsa, quæ coeli ámbitu continéntur: Dominus
                        universórum
                        tu
                        es.</p>
                </div>
            </div>
            <div class="line"></div>
            <div class="row">
                <div class="col-md-6">
                    <h2>Kolekta</h2>
                    <p>Prosimy Cię, Panie, strzeż nieustannie Twojej rodziny z ojcowską dobrocią, aby pod Twoją
                        opieką
                        była
                        wolna od wszelkich przeciwności, i przez dobre czyny oddana chwale Twego imienia. Przez
                        Pana.</p>
                </div>
                <div class="col-md-6">
                    <h2>Oratio</h2>
                    <p>Famíliam tuam, quǽsumus, Dómine, contínua pietáte custódi: ut a cunctis adversitátibus, te
                        protegénte,
                        sit líbera, et in bonis áctibus tuo nómini sit devóta. Per Dominum.</p>
                </div>
            </div>
            <div class="line"></div>
            <div class="row">
                <div class="col-md-6">
                    <h2>Lekcja</h2>
                    <p>Czytanie z Listu świętego Pawła Apostoła do Efezjan.</p>
                    <p><em>Ef 6:10-17</em></p>
                    <p><em>Treścią dziejów Kościoła jest walka z szatanem o zbawienie dusz.</em></p>
                    <p>Bracia: Umacniajcie się w Panu i w działaniu mocy Jego. Przyobleczcie się w zbroję Bożą,
                        abyście
                        mogli
                        się ostać przeciw zasadzkom diabelskim. Albowiem prowadzimy walkę nie z ciałem i z krwią,
                        ale
                        przeciw
                        książętom i władzom, przeciw rządcom świata tych ciemności, przeciw złym duchom w
                        przestworzach
                        niebieskich.</p>
                    <p>Przeto przyobleczcie się w zbroję Bożą, abyście mogli stawić opór w dzień zły i, wypełniwszy
                        wszystko,
                        ostać się. Bądźcie przeto w pogotowiu, przepasawszy biodra wasze prawdą i przyodziawszy
                        pancerz
                        sprawiedliwości, a nogi obuwszy w gotowość Ewangelii pokoju. We wszystkim trzymajcie się
                        tarczy
                        wiary,
                        którą moglibyście zagasić wszystkie strzały ogniste złego ducha. Przyodziejcie też przyłbicę
                        zbawienia i
                        weźmijcie miecz ducha, którym jest Słowo Boże.</p>
                </div>
                <div class="col-md-6">
                    <h2>Lectio</h2>
                    <p>Lectio Epistolæ beáti Pauli Apóstoli ad Ephésios.</p>
                    <p><em>Ephes 6:10-17</em></p>
                    <p>Fratres: Confortámini in Dómino et in poténtia virtútis ejus. Indúite vos armatúram Dei, ut
                        póssitis
                        stare advérsus insídias diáboli. Quóniam non est nobis colluctátio advérsus carnem et
                        sánguinem:
                        sed
                        advérsus príncipes et potestátes, advérsus mundi rectóres tenebrárum harum, contra
                        spirituália
                        nequítiae, in coeléstibus. Proptérea accípite armatúram Dei, ut póssitis resístere in die
                        malo
                        et in
                        ómnibus perfécti stare. State ergo succíncti lumbos vestros in veritáte, et indúti lorícam
                        justítiæ, et
                        calceáti pedes in præparatióne Evangélii pacis: in ómnibus suméntes scutum fídei, in quo
                        póssitis ómnia
                        tela nequíssimi ígnea exstínguere: et gáleam salútis assúmite: et gládium spíritus, quod est
                        verbum
                        Dei.</p>
                </div>
            </div>
            <div id="lang-switch" class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-secondary active">
                    <input type="radio" name="lang-switch" id="option1" autocomplete="off" checked> pol
                </label>
                <label class="btn btn-secondary">
                    <input type="radio" name="lang-switch" id="option2" autocomplete="off"> łac
                </label>
            </div>
        </main>
    </div>
</div>


<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {

        // making :contains case insensitive
        $.expr[":"].contains = $.expr.createPseudo(function(arg) {
            return function( elem ) {
                return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
            };
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar, #content').toggleClass('active');
        });

        $('#datetimepicker4').datetimepicker({
            format: 'YYYY-MM-DD',
            useCurrent: false,
            widgetPositioning: {
                horizontal: 'right'
            }
        });

        $('#datetimepicker4 input').on('input', function () {
            document.location.hash = this.value;
            $('input#search-input').val("").trigger("input");
        });

        $('input#search-input').on('input', function () {
            let searchString = $(this).val();
            let itemsAll = $('.sidebar-calendar-item');
            if (searchString === '') {
                itemsAll.show();
            } else {
                itemsAll.hide();
                $('li.sidebar-calendar-item div:contains("' + searchString + '")').parent().parent().show("fast");
            }
            togglePropersSidebarItem(activeDate);
        });

        function togglePropersSidebarItem(date) {
            function markItemActive(date) {
                $("nav#sidebar li.sidebar-calendar-item").removeClass("active");
                let newActive = $("li#sidebar-calendar-item-" + date);
                newActive.addClass("active");
                let sidebar = $('nav#sidebar');

                let itemPosition = newActive.position().top;
                let sidebarPosition = Math.abs(sidebar.find('ul').position().top);

                if (Math.abs(itemPosition) > sidebar.height() * 0.6) {
                    sidebar.animate({scrollTop: sidebarPosition + itemPosition - 100}, 200);
                }
            }

            let newActive = $("li#sidebar-calendar-item-" + date);
            if (newActive.length == 0) {
                loadPropersSidebar(date, markItemActive);
            } else {
                markItemActive(date);
            }
        }

        function loadProperByDate(date) {
            $.getJSON( "http://localhost:5000/date/" + date, function( data ) {
                let title = data['info'].title;
                let descritpion = data['info'].description;
                let sectionsVernacular = data.proper_vernacular;
                let sectionsLatin = data.proper_latin;
                let additional_info = [data['info'].date];
                if (data['info'].tempora != null) {
                    additional_info.push(data['info'].tempora);
                }
                if (data['info'].additional_info != null) {
                    $.merge(additional_info, data['info'].additional_info);
                }

                let main = $("main");
                main.empty();
                main.scrollTop(0);

                let intro = "<h1 class=\"display-8\">" + title + "</h1><p><em class=\"rubric\"'>";
                intro += additional_info.join("</em> | <em class=\"rubric\">");
                intro += "</em></p><p>" + descritpion +  "</p>";
                $(intro).appendTo(main);

                $.each([sectionsVernacular, sectionsLatin], function(i, sections) {
                    $.each(sections, function(x, y) {sections[x].body = y.body.replace(/\*([^\*]+)\*/g, "<em>$1</em>")})

                });
                for (let i = 0; i < sectionsVernacular.length; i++) {
                    let row = "<div class=\"row\"><div class=\"col-md-6\"><h2>" + sectionsVernacular[i].label +
                        "</h2><p>"+ sectionsVernacular[i].body.split("\n").join("<br />") +"</p></div><div class=\"col-md-6\"><h2>" + sectionsLatin[i].label +
                        "</h2><p>"+ sectionsLatin[i].body.split("\n").join("<br />") +"</p></div></div>";
                    $(row).appendTo(main);
                }
                togglePropersSidebarItem(date);
            });
        }

        function loadPropersSidebar(date, markItemActiveCallback) {
            let year = date.split('-')[0];
            $.getJSON( "http://localhost:5000/calendar/" + year, function( data ) {
                let sidebar = $('nav#sidebar>ul');
                sidebar.empty();

                let prevYear = parseInt(year) - 1;
                let prevYearLastDay = prevYear + '-12-31';
                $("<li class=\"sidebar-calendar-item\"><a href=\"#" + prevYearLastDay +
                "\"><div class=\"tempora rubric\">" + prevYear + " ⬏</div></a></li>").appendTo(sidebar);

                $.each(data, function(date, day) {
                    let additional_info = [date];
                    let celebration;
                    if (day.celebration.length > 0) {
                        celebration = day.celebration[0].title;
                    } else {
                        celebration = date;
                    }
                    if (day.tempora.length > 0 && day.tempora[0].title != celebration) {
                        additional_info.push(day.tempora[0].title);
                    }

                    let row = "<li id=\"sidebar-calendar-item-" + date + "\"" + " class=\"sidebar-calendar-item\"><a href=\"#" + date +
                        "\"><div>" + celebration + "</div><div class=\"tempora rubric\">" + additional_info.join(" | ") +  "</div></a></li>"
                    $(row).appendTo(sidebar);


                });

                let nextYear = parseInt(year) + 1;
                let nextYearFirstDay = nextYear + '-01-01';
                $("<li class=\"sidebar-calendar-item\"><a href=\"#" + nextYearFirstDay +
                    "\"><div class=\"tempora rubric\">" + nextYear + " ⬎</div></a></li>").appendTo(sidebar);

                markItemActiveCallback(date);
                $('input#search-input').attr("placeholder", "Szukaj w " + year + "...");
            });
        }



        $(window).on('hashchange', function() {
            activeDate = document.location.hash.replace("#", "");
            loadProperByDate(activeDate);
        });

        let tmpDate = document.location.hash.replace("#", "");
        let month;
        if (tmpDate == '') {
            tmpDate = new Date();

        } else {
            tmpDate = new Date(tmpDate);
        }
        month = tmpDate.getMonth() + 1;
        let activeDate = tmpDate.getFullYear() + '-' + month + '-' + tmpDate.getDate();
        loadProperByDate(activeDate);
    });
</script>

</body>
</html>
